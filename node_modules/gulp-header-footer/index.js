/* jshint node: true */
'use strict';

var through = require('through2');
var gutil = require('gulp-util');

module.exports = function(options) {
     var header = options.header || '',
         footer = options.footer || '',
         filter = options.filter;

     var stream = through.obj(function(file, enc, cb) {

         if(!filter(file)) {
             this.push(file);
             return cb();
         }

         if (file.isBuffer()) {
             file.contents = Buffer.concat([
                 new Buffer(header),
                 file.contents,
                 new Buffer(footer)
             ]);
         }

         this.push(file);
         cb();
     });

     // returning the file stream
     return stream;
 };
